{% extends "base.html" %}

{% block content %}
{% if user %}
<div class="jumbotron jumbotron-fluid bg-flake rounded-50">
    <div class="container">
        <div class="row">
            <div class="col"><hr></div>
            <h1 class="col-auto">{{user["username"]}}</h1>
            <div class="col"><hr></div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link active" id="v-pills-main-tab" data-toggle="pill" href="#v-pills-main" role="tab" aria-controls="v-pills-main" aria-selected="true">Profil użytkownika</a>
                    <a class="nav-link" id="v-pills-subforums-tab" data-toggle="pill" href="#v-pills-subforums" role="tab" aria-controls="v-pills-subforums" aria-selected="false">Podfora użytkownika</a>
                    <a class="nav-link" id="v-pills-posts-tab" data-toggle="pill" href="#v-pills-posts" role="tab" aria-controls="v-pills-posts" aria-selected="false">Posty użytkownika</a>
                    <a class="nav-link" id="v-pills-comments-tab" data-toggle="pill" href="#v-pills-comments" role="tab" aria-controls="v-pills-comments" aria-selected="false">Komentarze użytkownika</a>
                </div>
            </div>
            <div class="col-md-9">
                <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade show active text-center" id="v-pills-main" role="tabpanel" aria-labelledby="v-pills-main-tab">
                        <p>Ilość utworzonych subforów: {{len(forums)}}</p>
                        <p>Ilość utworzonych postów: {{len(posts)}}</p>
                        <p>Ilość utworzonych komentarzy: {{len(comments)}}</p>
                    </div>
                    <div class="tab-pane fade show" id="v-pills-subforums" role="tabpanel" aria-labelledby="v-pills-sunforums-tab">
                        {% if forums %}
                        {% for forum in forums %}
                            <div class="card post_list">
                                <div class="card text-white bg-flake">
                                    <h5 class="card-title"><a href="/index?cat={{forum.name}}">{{forum["name"]}}</a></h5>
                                    <h6 class="card-subtitle mb-2 text-muted">{{forum["tags"]}}</h6>
                                    <p class="card=text">{{forum["desc"]}}</p>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                        <p class="text-center">Ten użytkownik nie założył żadnych podfor.</p>
                        {% endif %}
                    </div>
                    <div class="tab-pane fade show" id="v-pills-posts" role="tabpanel" aria-labelledby="v-pills-posts-tab">
                        {% if posts %}
                        {% for post in posts %}
                            <div class="card post_list">
                                <div class="card text-white bg-flake">
                                    <h5 class="card-title"><a href="/post?id={{post.pub_date}}">{{post["title"]}}</a></h5>
                                    <h6 class="card-subtitle mb-2 text-muted">{{post["tags"]}}</h6>
                                    <p class="card=text">{{post["content"]}}</p>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                        <p class="text-center">Ten użytkownik nie utworzył żadnego posta.</p>
                        {% endif %}
                    </div>
                    <div class="tab-pane fade show" id="v-pills-comments" role="tabpanel" aria-labelledby="v-pills-comments-tab">
                        {% if comments %}
                        {% for comment in comments %}
                            <div class="card post_list">
                                <div class="card text-white bg-flake">
                                    <h5 class="card-title"><a href="/post?id={{comment.target}}">{{Post.query.filter_by(pub_date=comment.target).first().title}}</a></h5>
                                    <h6 class="card-subtitle mb-2 text-muted">{{comment["pub_date"].isoformat(' ', "minutes")}}</h6>
                                    <p class="card=text">{{comment["content"]}}</p>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                        <p class="text-center">Ten użytkownik nic nie skomentował.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}